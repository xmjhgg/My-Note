# 维度建模过程与任务
这一章主要指导维度建模的过程

- 维度建模过程任务流程图
![](./img/dmtoolkit/%E7%BB%B4%E5%BA%A6%E5%BB%BA%E6%A8%A1%E8%BF%87%E7%A8%8B%E6%B5%81%E7%A8%8B%E5%9B%BE.png)  

下面详细介绍维度建模过程的各个流程
## 组织工作
开始构建模型前，为使维度建模过程能够顺利开展，必须开展适当的准备工作

### 确定参与人
最好的维度模型往往是小组努力协同工作的结果，参与维度建模的人员除了主力维度建模师以外，还应当有：  
1. 业务功能代表人员  
让业务出身的业务专家参与其间是至关重要，他们通常能指出如何从源数据中得到数据并将这些数据转换为有价值的分析信息的人员   
2. 数据库管理员和ETL小组  
可以提前了解维度模型背后的含义以及维度建模相关的知识，便于后续的开发任务

### 业务需求评审
开始建模之前，小组必须熟悉业务需求 。第1步是仔细评审业务需求文档 。将业务需求转换为灵活的维度模型，用于支持范围广泛的分析，而不是仅仅支持特定的报表。
### 利用建模工具
利用建模工具来更好的表达维度模型，并方便在后续的评审中迭代更新维度模型，以及建模工具可以帮助DBA将设置好的模型转换到数据库中
https://dbdiagram.io/home

### 利用数据分析工具分析源数据
在整个建模过程中，维度建模小组需要不断地深入源数据，可以利用数据分析工具来了解源数据中实际存在的内容与数据情况，数据是否可靠，数据缺陷严不严重
### 建立命名规范
如果公司中还没有DW/BI命名规范，那么就应当实现建立起DW/BI的命名规范  
比较常见的一种命名规范就是：
原始词_0个或者多个限定词_类词  
原始词是指这个列所属的表的名字，类词是这个列的实际内容比如金额、数量等。限定词则是将类词限定在某个范围的词语比如：下单金额、商品单价。
如订单支付金额这一个事实，遵守命名规范下的名称就是
order_payment_ammount

### 日程与地点协调
协调好维度建模相关的会议地点与时间

## 维度模型设计
在维度模型设计中有关键的四个步骤，其中第一步： 确定业务过程，这一步按照之前的业务需求来确定，在此基础上 维度建模小组就可以开展相关的设计任务：  
- 定义模型范围和粒度的高级模型
- 详细设计每个表的属性和度量
- IT和业务代表的评审和验收
- 设计文档定稿
下面详细介绍这四点
### 统一高层维度模型图
高层维度模型是概要的描述维度模型，可以使用气泡图来表示高层维度模型  
![](./img/dmtoolkit/%E9%AB%98%E5%B1%82%E6%A8%A1%E5%9E%8B.png)
高层维度模型图简要的表示了业务过程中的维度和事实表以及事实表的粒度，在制作完高层维度模型图后，就应当开启评审，统一大家对此维度模型的理解，然后才开始开发详细的维度模型。

### 开发详细的维度模型
在高层气泡图设计完成后，就可以开始关注细节了。

推荐先设计维度表，然后考虑设计事实表。这样可以保证在对维度的有一致性理解下再开始设计事实表，其中日期维度一般可以作为首选开始考虑的维度表。
#### 确定维度与属性
维度建模小组主导该过程，在这个过程中定义关键的一致性维度，并且还需要考虑维度模型中可能包含的杂项维度和微型维度
#### 确定事实
确定由源系统的度量事件中产生的事实，事实需要和事实表的粒度保持一致
#### 确定缓慢变化维度技术
根据高层模型图初步设计好维度和事实表后，应当开始针对维度表的每个属性开始分析在源系统数据发生变化时，对维度表会产生何种影响，以及要采用哪种方式来处理缓慢变化维
#### 建立详细的表文档
这一步为每个事实表与维度表建立详细的文档，文档中至少需要要包含属性的名称、示例值、缓慢编号维度处理类型标识、事实表中要标识每个外键的关联关系、退化维度，对于事实还需要标注是可加事实、半可加事实、不可加事实。  
详细表文档示例：  
![](./img/dmtoolkit/%E8%AF%A6%E7%BB%86%E8%A1%A8%E6%96%87%E6%A1%A3.png)
#### 维护并更新总线矩阵
在建模过程中，可能会引入新的业务过程，从而产生新的维度，或者发现新的维度，在维度建模过程中需要始终保持对数据仓库总线矩阵的更新
### 模型评审
对详细的维度模型进行评审，收尾
### 形成最终的设计文档  
在评审完成、模型稳定后，应当输出一份最后的设计文档，这份文档应当包含以下内容：  
- 项目的简短描述
- 高层维度模型图
- 详细的针对每个事实和维度表的维度设计表文档
- 未来的拓展
## 小结
本章概要的介绍了设计维度建模的执行流程